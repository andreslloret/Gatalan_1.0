<h1><%= @tour.name %></h1>

<% if @tour.image.attached? %>
  <%= image_tag @tour.image.variant(resize_to_limit: [800, 600]) %>
<% end %>

<p><%= @tour.description %></p>

<p><strong>Date:</strong> <%= @tour.date.strftime("%B %d, %Y") %></p>

<p><strong>Price:</strong> <%= number_to_currency(@tour.price) %></p>

<p>
  <%= link_to "Edit", edit_tour_path(@tour) %> |
  <%= link_to "Delete", tour_path(@tour), method: :delete, data: { confirm: "Are you sure?" } %> |
  <%= link_to "Back to Tours", tours_path %>
</p>

<%= form_with(model: [@tour, @tour.bookings.new], url: tour_create_booking_path(@tour)) do |form| %>
  <div class="form-group">
    <%= form.label :date %>
    <%= form.date_select :date, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :number_of_people %>
    <%= form.number_field :number_of_people, class: "form-control" %>
  </div>

  <%= form.submit "Book Now", class: "btn btn-primary" %>
<% end %>

<% if @tour.bookings.any? %>
  <h2>Bookings</h2>

  <ul>
    <% @tour.bookings.each do |booking| %>
      <li><strong>Booked on:</strong> <%= booking.date.strftime("%B %d, %Y") %> - <strong>Number of people:</strong> <%= booking.number_of_people %></li>
    <% end %>
  </ul>
<% else %>
  <p><em>No bookings yet.</em></p>
<% end %>
